<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"  />
<meta name="description" content="Andrey Vityuk's Dev Blog" />
<meta name="keywords" content="code,software,development" />
<meta name="author" content="Andrey Vityuk" />
<link rel="stylesheet" type="text/css" href="/stylesheets/default.css" />
<link rel="stylesheet" type="text/css" href="/stylesheets/syntax.css" />

<link rel="canonical" href="http://avityuk.github.com/2009/03/blog-post.html">

<link rel="alternate" type="application/atom+xml" href="http://avityuk.github.com/atom.xml" />

<title>Фабричный метод</title>
</head>
<body>
	<div id="header">
		<h1><a id="blog-title" href="http://avityuk.github.com">Andrey Vityuk</a></h1>
		Tips and walkthroughs on software development
	</div>

	<div id="main">
		<div id="content">
			<div id="post">
	<h2 class="date-header">Sunday, March 22, 2009</h2>
	<h3 class="post-title"><a href="/2009/03/blog-post.html" rel="bookmark">Фабричный метод</a></h3>
	
	<div id="post-image">
		<img src="http://2.bp.blogspot.com/_MzPDIAgS1ow/ScY48e6QaTI/AAAAAAAAJ6Y/WkCsn9_myxU/s400/magican.jpg" width="304px" height="400px" />
	</div>
	
	<p>В этот раз речь пойдет о паттернах проектирования. Если быть точнее — <strong>Статическом фабричном методе (<a href="http://en.wikipedia.org/wiki/Factory_method_pattern#Encapsulation">Static Factory Method</a>)</strong>. Вкратце, он призван для того, чтобы инкапсулировать процесс создания объекта.  </p>

<p>Допустим, у нас есть метод, который возвращает определенный набор (список) данных. Этот метод должен иметь возможность вернуть для каждой единицы фактический результат или ошибку. Естественно, что в таком случае исключения бросать нельзя, иначе мы не получим "хорошие" данные. Обычно, в таких целях используется объект-контейнер, который хранит или данные или ошибку или просто пустой.<br />
<a name="more"></a></p>

<p><img src="http://2.bp.blogspot.com/_MzPDIAgS1ow/ScYL6elUhfI/AAAAAAAAJ6I/ooU5hz-_hWI/s400/1.png" alt="Response" /></p>

<p><em>Response.java:</em></p>

<div class="highlight"><pre><code class="java"><span class="kn">package</span> <span class="n">factory</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">V</span> <span class="n">value</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">E</span> <span class="n">error</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Response</span><span class="o">(</span><span class="n">V</span> <span class="n">value</span><span class="o">,</span> <span class="n">E</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">checkParams</span><span class="o">(</span><span class="n">value</span><span class="o">,</span> <span class="n">error</span><span class="o">);</span>

    <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nf">Response</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">value</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">error</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ensureNotEmpty</span><span class="o">();</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="n">V</span> <span class="nf">getValue</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ensureNotEmpty</span><span class="o">();</span>
    <span class="n">ensureSuccess</span><span class="o">();</span>

    <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="n">E</span> <span class="nf">getError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ensureNotEmpty</span><span class="o">();</span>
    <span class="n">ensureError</span><span class="o">();</span>

    <span class="k">return</span> <span class="n">error</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="n">checkParams</span><span class="o">(</span><span class="n">V</span> <span class="n">value</span><span class="o">,</span> <span class="n">E</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Both error and value cannot be null&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">ensureNotEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isEmpty</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">&quot;Operation is not allowed for empty response&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">ensureError</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isSuccess</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">&quot;Operation is not allowed for success response&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">ensureSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">isSuccess</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">&quot;Operation is not allowed for error response&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p><em>ResponseTest.java:</em></p>

<div class="highlight"><pre><code class="java"><span class="kn">package</span> <span class="n">factory</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertFalse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResponseTest</span> <span class="o">{</span>
  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseWithNulls</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">success</span><span class="o">(</span><span class="mi">150</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">error</span><span class="o">(</span><span class="s">&quot;test error&quot;</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">empty</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsEmptyWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">135</span><span class="o">);</span>

    <span class="n">assertFalse</span><span class="o">(</span><span class="n">success</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsEmptyWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;validation error&quot;</span><span class="o">);</span>

    <span class="n">assertFalse</span><span class="o">(</span><span class="n">error</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsEmptyWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>

    <span class="n">assertTrue</span><span class="o">(</span><span class="n">empty</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsSuccessWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">763</span><span class="o">);</span>

    <span class="n">assertTrue</span><span class="o">(</span><span class="n">success</span><span class="o">.</span><span class="na">isSuccess</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsSuccessWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;db error&quot;</span><span class="o">);</span>

    <span class="n">assertFalse</span><span class="o">(</span><span class="n">error</span><span class="o">.</span><span class="na">isSuccess</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsSuccessWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>

    <span class="n">empty</span><span class="o">.</span><span class="na">isSuccess</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetValueWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">921</span><span class="o">);</span>

    <span class="n">assertEquals</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">921</span><span class="o">),</span> <span class="n">success</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetValueWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;out of service&quot;</span><span class="o">);</span>

    <span class="n">error</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetValueWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>

    <span class="n">empty</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetErrorWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">48150</span><span class="o">);</span>

    <span class="n">success</span><span class="o">.</span><span class="na">getError</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetErrorWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;application is broken&quot;</span><span class="o">);</span>

    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;application is broken&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">getError</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetErrorWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>

    <span class="n">empty</span><span class="o">.</span><span class="na">getError</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span><span class="o">(</span><span class="n">Integer</span> <span class="n">successValue</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;(</span><span class="n">successValue</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span><span class="o">(</span><span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;(</span><span class="kc">null</span><span class="o">,</span> <span class="n">errorMessage</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>В этом примере <code>Response</code> содержит два конструктора: один (без параметров) для пустых ответов и второй (с двумя параметрами) для ответов с данным или ошибками. Было бы логично иметь три конструктора, но не смотря на использования <em>generic</em> типов, параметры на самом деле имеют тип <code>Object</code>, соответственно конструктор не может быть перегружен.  </p>

<p>Думаю, что все согласятся, что таким контейнером пользоваться неудобно и немного сбивает с толку конструктор с двумя аргументами, который всегда ожидает одно из значений - <code>null</code>. Сам подход передавать <code>null</code> в метод или конструктор уже считается неправильным (за исключением некоторых случаев).  </p>

<p>Итак, что, если сделать для каждого типа контейнера статический метод, который будет конструировать для нас соответствующий экземпляр.  </p>

<p><em>Response.java:</em></p>

<div class="highlight"><pre><code class="java"><span class="kn">package</span> <span class="n">factory1</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">V</span> <span class="n">value</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">E</span> <span class="n">error</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">fromValue</span><span class="o">(</span><span class="n">V</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;(</span><span class="n">value</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">fromError</span><span class="o">(</span><span class="n">E</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;(</span><span class="kc">null</span><span class="o">,</span> <span class="n">error</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">empty</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="nf">Response</span><span class="o">(</span><span class="n">V</span> <span class="n">value</span><span class="o">,</span> <span class="n">E</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ensureNotEmpty</span><span class="o">();</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="n">V</span> <span class="nf">getValue</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ensureNotEmpty</span><span class="o">();</span>
    <span class="n">ensureSuccess</span><span class="o">();</span>

    <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="n">E</span> <span class="nf">getError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ensureNotEmpty</span><span class="o">();</span>
    <span class="n">ensureError</span><span class="o">();</span>

    <span class="k">return</span> <span class="n">error</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">ensureNotEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isEmpty</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">&quot;Operation is not allowed for empty response&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">ensureError</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isSuccess</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">&quot;Operation is not allowed for success response&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">ensureSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">isSuccess</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">&quot;Operation is not allowed for error response&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p><em>ResponseTest.java:</em></p>

<div class="highlight"><pre><code class="java"><span class="kn">package</span> <span class="n">factory1</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertFalse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResponseTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">success</span><span class="o">(</span><span class="mi">150</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">error</span><span class="o">(</span><span class="s">&quot;test error&quot;</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">empty</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsEmptyWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">135</span><span class="o">);</span>

    <span class="n">assertFalse</span><span class="o">(</span><span class="n">success</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsEmptyWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;validation error&quot;</span><span class="o">);</span>

    <span class="n">assertFalse</span><span class="o">(</span><span class="n">error</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsEmptyWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>

    <span class="n">assertTrue</span><span class="o">(</span><span class="n">empty</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsSuccessWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">763</span><span class="o">);</span>

    <span class="n">assertTrue</span><span class="o">(</span><span class="n">success</span><span class="o">.</span><span class="na">isSuccess</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsSuccessWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;db error&quot;</span><span class="o">);</span>

    <span class="n">assertFalse</span><span class="o">(</span><span class="n">error</span><span class="o">.</span><span class="na">isSuccess</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsSuccessWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>

    <span class="n">empty</span><span class="o">.</span><span class="na">isSuccess</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetValueWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">921</span><span class="o">);</span>

    <span class="n">assertEquals</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">921</span><span class="o">),</span> <span class="n">success</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetValueWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;out of service&quot;</span><span class="o">);</span>

    <span class="n">error</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetValueWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>

    <span class="n">empty</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetErrorWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">48150</span><span class="o">);</span>

    <span class="n">success</span><span class="o">.</span><span class="na">getError</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetErrorWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;application is broken&quot;</span><span class="o">);</span>

    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;application is broken&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">getError</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetErrorWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>

    <span class="n">empty</span><span class="o">.</span><span class="na">getError</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span><span class="o">(</span><span class="n">Integer</span> <span class="n">successValue</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">fromValue</span><span class="o">(</span><span class="n">successValue</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span><span class="o">(</span><span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">fromError</span><span class="o">(</span><span class="n">errorMessage</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Методы <code>Response.fromValue()</code>, <code>Response.fromError()</code>, <code>Response.empty()</code> прозрачно для пользователя создают объект. Таким образом, они решают путаницу с конструкторами и даже делают код более осмысленным. Собственно, эти методы и являются <em>статическими фабричными методами</em>.  </p>

<p>Что же теперь дают нам статические методы? На первый взгляд ничего более, кроме удобного использования. На самом же деле, существуют ещё две полезные возможности фабричных методов:</p>

<ul>
  <li>В отличии от конструкторов, в фабричных методах объект не обязан конструироваться. Это свойство можно использовать для кеширования тяжеловесных объектов.</li>
  <li>Фабричный метод может вернуть не только экземпляр своего класса, но и любого из подклассов.</li>
</ul>

<p>Для нашего примера нас интересует последнее свойство. Допустим, что наш контейнер на самом деле не один класс, а три отдельных класса: <code>Success</code>, <code>Error</code> и <code>Empty</code>. И каждый из них является наследником <code>Response</code>. Таким образом, каждый класс будет решать свою задачу (хранить данные, ошибку или просто быть пустым).  </p>

<p><img src="http://2.bp.blogspot.com/_MzPDIAgS1ow/ScYjGYW89tI/AAAAAAAAJ6Q/r64NrMO2Q18/s400/2.png" alt="Response" />  </p>

<p><em>Response.java:</em></p>

<div class="highlight"><pre><code class="java"><span class="kn">package</span> <span class="n">factory2</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">EMPTY</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Empty</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">fromValue</span><span class="o">(</span><span class="n">V</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">NullPointerException</span><span class="o">(</span><span class="s">&quot;Parameter &#39;value&#39; must be not null.&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Success</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;(</span><span class="n">value</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">fromError</span><span class="o">(</span><span class="n">E</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">NullPointerException</span><span class="o">(</span><span class="s">&quot;Parameter &#39;error&#39; must be not null.&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Error</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;(</span><span class="n">error</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">&quot;unchecked&quot;</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">empty</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;)</span> <span class="n">EMPTY</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="nf">Response</span><span class="o">()</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">boolean</span> <span class="nf">isEmpty</span><span class="o">();</span>

  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">boolean</span> <span class="nf">isSuccess</span><span class="o">();</span>

  <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">V</span> <span class="nf">getValue</span><span class="o">();</span>

  <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">E</span> <span class="nf">getError</span><span class="o">();</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Success</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">V</span> <span class="n">value</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nf">Success</span><span class="o">(</span><span class="n">V</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isEmpty</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isSuccess</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">V</span> <span class="nf">getValue</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">E</span> <span class="nf">getError</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="nf">notAllowedOperationException</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">IllegalStateException</span> <span class="nf">notAllowedOperationException</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">&quot;Operation is not allowed for success response&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Error</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">E</span> <span class="n">error</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nf">Error</span><span class="o">(</span><span class="n">E</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isEmpty</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isSuccess</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">V</span> <span class="nf">getValue</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="nf">notAllowedOperationException</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">E</span> <span class="nf">getError</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">error</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">IllegalStateException</span> <span class="nf">notAllowedOperationException</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">&quot;Operation is not allowed for error response&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Empty</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">V</span><span class="o">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isEmpty</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isSuccess</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="nf">notAllowedOperationException</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">V</span> <span class="nf">getValue</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="nf">notAllowedOperationException</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">E</span> <span class="nf">getError</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="nf">notAllowedOperationException</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">IllegalStateException</span> <span class="nf">notAllowedOperationException</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">&quot;Operation is not allowed for empty response&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p><em>ResponseTest.java:</em></p>

<div class="highlight"><pre><code class="java"><span class="kn">package</span> <span class="n">factory2</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertFalse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResponseTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">success</span><span class="o">(</span><span class="mi">150</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">NullPointerException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseSuccessWithNull</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">success</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">error</span><span class="o">(</span><span class="s">&quot;test error&quot;</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">NullPointerException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseErrorWithNull</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">error</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testResponseEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">empty</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsEmptyWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">135</span><span class="o">);</span>
    <span class="n">assertFalse</span><span class="o">(</span><span class="n">success</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsEmptyWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;validation error&quot;</span><span class="o">);</span>
    <span class="n">assertFalse</span><span class="o">(</span><span class="n">error</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsEmptyWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>
    <span class="n">assertTrue</span><span class="o">(</span><span class="n">empty</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsSuccessWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">763</span><span class="o">);</span>
    <span class="n">assertTrue</span><span class="o">(</span><span class="n">success</span><span class="o">.</span><span class="na">isSuccess</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsSuccessWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;db error&quot;</span><span class="o">);</span>
    <span class="n">assertFalse</span><span class="o">(</span><span class="n">error</span><span class="o">.</span><span class="na">isSuccess</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testIsSuccessWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>
    <span class="n">empty</span><span class="o">.</span><span class="na">isSuccess</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetValueWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">921</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">921</span><span class="o">),</span> <span class="n">success</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetValueWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;out of service&quot;</span><span class="o">);</span>
    <span class="n">error</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetValueWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>
    <span class="n">empty</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetErrorWithSuccess</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span> <span class="o">=</span> <span class="n">success</span><span class="o">(</span><span class="mi">48150</span><span class="o">);</span>
    <span class="n">success</span><span class="o">.</span><span class="na">getError</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetErrorWithError</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;application is broken&quot;</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;application is broken&quot;</span><span class="o">,</span> <span class="n">error</span><span class="o">.</span><span class="na">getError</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetErrorWithEmpty</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="o">();</span>
    <span class="n">empty</span><span class="o">.</span><span class="na">getError</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">success</span><span class="o">(</span><span class="n">Integer</span> <span class="n">successValue</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">fromValue</span><span class="o">(</span><span class="n">successValue</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">error</span><span class="o">(</span><span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">fromError</span><span class="o">(</span><span class="n">errorMessage</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Response</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">empty</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Интерфейс остался прежним, соответственно, тесты те же, что и в предыдущем примере. Последний пример имеет не только более опрятную реализацию, к тому же, по производительности и расходу памяти он более оптимален: поведение большинства методов определяется статически в зависимости от конкретной реализации, а ссылки сами по себе (даже пустые) используют память. Более того, в качестве пустого контейнера (<code>Response.Empty</code>) всегда возвращается один и тот же объект, который создается только один раз (такой себе <a href="http://ru.wikipedia.org/wiki/%D0%9E%D0%B4%D0%B8%D0%BD%D0%BE%D1%87%D0%BA%D0%B0_(%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F)">Синглтон</a>). Кстати, в качестве разминки, советую попробовать реализовать правильные методы <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html#equals(java.lang.Object)">equals</a> и <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html#hashCode()">hashCode</a> для нашего <code>Response</code> (советую начать с тестов). Думаю, что никто не будет отрицать преимуществ использования паттерна <em>Фабричный метод</em> для нашей задачи. Лично у меня для себя есть такое правило: если есть частично или полностью <a href="http://en.wikipedia.org/wiki/Immutable_object">Immutable object</a>, то всегда стоит подумать о том, чтобы сделать <em>фабричный метод</em> вместо конструктора, даже когда он явно делает то же самое, что и конструктор. Да, я знаю, это может немного противоречить принципу <a href="http://en.wikipedia.org/wiki/You_Ain%27t_Gonna_Need_It">YAGNI</a>. Но в таких случаях я себя оправдываю тем, что статические методы выглядят красивее и порой удобней читаются. Далее, в награду, у меня всегда есть возможность что-то поменять внутри класса или сделать некую оптимизацию не затрагивая клиентский код. В нагрузку, советую посмотреть на реализацию метода <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Integer.html#valueOf(int)">Integer.valueOf()</a>. Для меня, в свое время, это было очень познавательно.</p>



	<div class="post-tags">
		Tags:
		
			<a href="/tags/java" rel="tag">java, </a>
		
			<a href="/tags/error-handling" rel="tag">error handling, </a>
		
			<a href="/tags/pattern" rel="tag">pattern, </a>
		
			<a href="/tags/factory-method" rel="tag">factory method</a>
		
	</div>
</div>
<div id="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
		var disqus_shortname = 'avityuk';
		var disqus_identifier = '/2009/03/blog-post';
		var disqus_url = 'http://blog.vityuk.com/2009/03/blog-post.html';
		(function() {
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>


		</div>
		<div id="sidebar">
			<div id="tags">
	<h2>Tags</h2>
	<div id="tags-cloud">
		<span style="font-size: 75%"><a href="/tags/compiler/" rel="tag">compiler</a></span>
<span style="font-size: 75%"><a href="/tags/bytecode/" rel="tag">bytecode</a></span>
<span style="font-size: 75%"><a href="/tags/debugging/" rel="tag">debugging</a></span>
<span style="font-size: 109%"><a href="/tags/reflection/" rel="tag">reflection</a></span>
<span style="font-size: 280%"><a href="/tags/java/" rel="tag">java</a></span>
<span style="font-size: 75%"><a href="/tags/factory method/" rel="tag">factory method</a></span>
<span style="font-size: 109%"><a href="/tags/pattern/" rel="tag">pattern</a></span>
<span style="font-size: 75%"><a href="/tags/google/" rel="tag">google</a></span>
<span style="font-size: 75%"><a href="/tags/sbt/" rel="tag">sbt</a></span>
<span style="font-size: 75%"><a href="/tags/formatting/" rel="tag">formatting</a></span>
<span style="font-size: 75%"><a href="/tags/error handling/" rel="tag">error handling</a></span>
<span style="font-size: 75%"><a href="/tags/performance/" rel="tag">performance</a></span>
<span style="font-size: 75%"><a href="/tags/jdbc/" rel="tag">jdbc</a></span>
<span style="font-size: 75%"><a href="/tags/testing/" rel="tag">testing</a></span>
<span style="font-size: 75%"><a href="/tags/appengine/" rel="tag">appengine</a></span>
<span style="font-size: 75%"><a href="/tags/generics/" rel="tag">generics</a></span>
<span style="font-size: 109%"><a href="/tags/scala/" rel="tag">scala</a></span>
<span style="font-size: 75%"><a href="/tags/multithreading/" rel="tag">multithreading</a></span>
<span style="font-size: 109%"><a href="/tags/logging/" rel="tag">logging</a></span>
<span style="font-size: 75%"><a href="/tags/web/" rel="tag">web</a></span>
<span style="font-size: 75%"><a href="/tags/mock/" rel="tag">mock</a></span>

	</div>
</div>

		</div>
		<div style="clear: both;"></div>
	</div>

	<div id="footer">
		Copyright &copy; 2010 All Rights Reserved.
	</div>
</body>
</html>
